<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.14.0-beta3/dist/css/bootstrap-select.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.1.3/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script defer
        src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.14.0-beta3/dist/js/bootstrap-select.min.js"></script>


    <style>
        :root {
            --color-blue: #2899bf;
        }


        .background {
            background-color: #175b72;
        }

        .form-header {
            max-width: 918px;
        }

        .form-header .card-header {
            background-color: var(--color-blue);
            font-weight: bold;
            font-size: 1.2rem;
        }

        .header-text {
            color: white;
        }

        .header-text span {
            color: var(--color-blue)
        }

        form label {
            font-weight: bold;
            color: #155e77;
            line-height: 24px;
            font-size: 15px;
        }

        select {
            padding: 10px;
        }

        .dropdown-menu {
            max-height: 300px;
            overflow-y: scroll;
        }

        .dropdown-toggle {
            border: 1px solid #1e7998;
            padding: 8px;
            border-radius: 0.3rem;
            background-color: white;
        }

        .dropdown-menu li {
            font-size: 15px;
            padding: 5px;
            font-weight: 500;
        }

        input {
            border: 1px solid #1e7998 !important;
        }

        #header a {
            color: white;
            text-decoration: none;
            font-weight: bold;
        }

        #header svg {
            margin-right: 10px;
            ;
        }

        .bootstrap-select {
            max-width: 100% !important;
            width: 100%;
        }
    </style>
</head>

<body>
    <div class="background">
        <header class="row" id="header">
            <div class="col-6 p-5">logo</div>
            <div class="col-6 text-end p-5"> <a href="tel:+666666666"><svg xmlns="http://www.w3.org/2000/svg"
                        class="icon icon-tabler icon-tabler-phone" width="24" height="24" viewBox="0 0 24 24"
                        stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                        <path
                            d="M5 4h4l2 5l-2.5 1.5a11 11 0 0 0 5 5l1.5 -2.5l5 2v4a2 2 0 0 1 -2 2a16 16 0 0 1 -15 -15a2 2 0 0 1 2 -2" />
                    </svg>666666666</a></div>
        </header>

        <aside class="text-center header-text">
            <h1 class="display-3 p-4">¿Has sufrido un <span>accidente</span> de tráfico?</h1>
        </aside>
        <div class="card form-header m-auto border-0 rounded-bottom-0">
            <div class="card-header p-4 text-white text-center">
                Datos del accidente
            </div>
            <div class="card-body p-4">
                <form>
                    <div class="row" id="lvl-1">
                        <div class="col-md-4 p-3">
                            <label for="year" class="form-label">Año del accidente</label>
                            <!-- Large button groups (default and split) -->
                            <select class="selectpicker col-12" data-container="body" id="anio"
                                placeholder="Seleccione">
                            </select>
                        </div>
                        <div class="col-md-4 p-3">
                            <label for="year" class="form-label">Provincia donde pasó el accidente
                            </label>
                            <select class="selectpicker col-12" data-live-search="true" data-container="body"
                                placeholder="Seleccione" id="provincia">

                            </select>
                        </div>
                        <div class="col-md-4 p-3">
                            <label for="year" class="form-label">Edad en el momento del accidente</label>
                            <input class="form-control" type="number" style="min-height: 42px;" id="edad"
                                placeholder="Escribe tu edad">
                        </div>
                    </div>
                    <div class="row d-none" id="lvl-2">
                        <div class="col-md-4 p-3">
                            <label for="year" class="form-label">Condición
                            </label>
                            <select class="selectpicker col-12" data-live-search="true" data-container="body"
                                placeholder="Seleccione" id="condicion">

                            </select>
                        </div>
                        <div class="col-md-4 p-3">
                            <label for="year" class="form-label">Tipo de colisión
                            </label>
                            <select class="selectpicker col-12" data-live-search="true" data-container="body"
                                placeholder="Seleccione" id="colision">
                                <option value="frontal">Frontal</option>
                                <option value="lateral">Lateral</option>
                                <option value="trasera">Trasera</option>
                            </select>
                        </div>
                        <div class="col-md-4 p-3 d-none" id="div_matricula">
                            <label for="year" class="form-label">Matricula
                            </label>
                            <input class="form-control" style="min-height: 42px;" type="text" id="matricula"
                                placeholder="1234ABC">
                        </div>
                    </div>
                    <div class="col-12 text-center m-3">

                        <button type="submit" class="btn btn-primary col-md-5 m-auto p-3">Calcular
                            indemnización</button>
                    </div>
                </form>
            </div>
        </div>


    </div>

    <script>

        const ANIOS = Array.from({ length: 35 }, (_, i) => 1990 + i);


        const PROVINCIAS = [
            "Álava", "Albacete", "Alicante", "Almería", "Asturias", "Ávila", "Badajoz", "Barcelona",
            "Burgos", "Cáceres", "Cádiz", "Cantabria", "Castellón", "Ciudad Real", "Córdoba", "Cuenca",
            "Gerona", "Granada", "Guadalajara", "Guipúzcoa", "Huelva", "Huesca", "Islas Balears", "Jaén",
            "La Coruña", "La Rioja", "Las Palmas", "León", "Lérida", "Lugo", "Madrid", "Málaga", "Murcia",
            "Navarra", "Orense", "Palencia", "Pontevedra", "Salamanca", "Santa Cruz de Tenerife", "Segovia",
            "Sevilla", "Soria", "Tarragona", "Teruel", "Toledo", "Valencia", "Valladolid", "Vizcaya",
            "Zamora", "Zaragoza"
        ];

        const CONDICION = [
            "Conductor", "Conductor de moto", "Ciclista", "Ocupante", "Petaon", "Conductor de patinete eléctrico"]

        const DATA = {
            edadAccidente: false,
            provincia: false,
            fechaAccidente: false,
            condicion: false,
            tipoColision: false,
            matricula: false

        };

        const PROVINCIA_SELECT = document.querySelector("#provincia");
        const ANIOS_SELECT = document.querySelector("#anio");
        const CONDICION_SELECT = document.querySelector("#condicion")
        const FORMULARIO = document.querySelector("form");

        function generateOptions(selectElement, options) {
            const optionsHTML = options.map(option => `<option data-prov="${option}">${option}</option>`).join('');
            selectElement.innerHTML += optionsHTML;
        }

        generateOptions(PROVINCIA_SELECT, PROVINCIAS);
        generateOptions(ANIOS_SELECT, ANIOS);
        generateOptions(CONDICION_SELECT, CONDICION);



        function viewLVL(lvl = 1) {
            const DIV_LVL = document.getElementById(`lvl-${lvl}`)
            DIV_LVL.classList.remove("d-none")
        }

        FORMULARIO.addEventListener('change', function (e) {
            // ID INPUT : KEY OBJECT
            const fieldMappings = {
                "edad": "edadAccidente",
                "anio": "fechaAccidente",
                "provincia": "provincia",
                "condicion": "condicion",
                "colision": "tipoColision",
                "matricula": "matricula"
            };

            const fieldName = e.target.id;
            const dataKey = fieldMappings[fieldName];

            if (dataKey) {
                DATA[dataKey] = e.target.value;

                if (fieldName === "condicion") {
                    handleCondicionChange();
                }
            }

            if (DATA.edadAccidente && DATA.provincia && DATA.fechaAccidente) {
                viewLVL(2);
            }
        });

        FORMULARIO.addEventListener('submit', function (e) {
            e.preventDefault();
            return;
        });

        function handleCondicionChange() {
            const divMatricula = document.getElementById("div_matricula");

            if (DATA.condicion === "Conductor" || DATA.condicion === "Conductor de moto") {
                divMatricula.classList.remove("d-none");
            } else {
                console.log(DATA.condicion);
                divMatricula.classList.add("d-none");
            }
        }


    </script>



</body>

</html>